<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <title>Consulta de Clientes</title>
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div class="clientes-container">
      <div class="clientes-filter-bar">
        <button class="clientes-back-btn" onclick="window.history.back()" title="Voltar">&#8592;</button>
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <label for="clientes-filtro">Filtro</label>
        <input
          type="text"
          id="clientes-filtro"
          class="clientes-filtro-input"
          placeholder="Digite o cpf, nome ou email"
        />
        <button class="clientes-filter-btn">Filtrar</button>
      </div>

      <div class="clientes-table-container">
        <table class="clientes-table">
          <thead>
            <tr>
              <th>CPF</th>
              <th>Nome</th>
              <th>CEP</th>
              <th>Endereço</th>
              <th>Telefone</th>
              <th>Email</th>
              <th>Data Cadastro</th>
            </tr>
          </thead>
          <tbody id="clientes-tbody">
            <!-- espaço para os clientes registradosd -->
          </tbody>
        </table>
      </div>
    </div>
    <script>
async function carregarClientes() {
  const tbody = document.getElementById('clientes-tbody');
  if (!tbody) return;
  tbody.innerHTML = '<tr><td colspan="7">Carregando...</td></tr>';
  try {
    const resp = await fetch('/api/clientes');
    const clientes = await resp.json();
    if (!clientes.length) {
      tbody.innerHTML = '<tr><td colspan="7">Nenhum cliente cadastrado</td></tr>';
      return;
    }
    tbody.innerHTML = '';
    clientes.forEach(cliente => {
      tbody.innerHTML += `
        <tr>
          <td>${cliente.cpf}</td>
          <td>${cliente.nome}</td>
          <td>${cliente.cep || ''}</td>
          <td>${cliente.endereco || ''}</td>
          <td>${cliente.telefone || ''}</td>
          <td>${cliente.email || ''}</td>
          <td>${cliente.data_cadastro ? cliente.data_cadastro.split('T')[0] : ''}</td>
        </tr>
      `;
    });
  } catch (error) {
    tbody.innerHTML = '<tr><td colspan="7">Erro ao carregar clientes</td></tr>';
  }
}

document.addEventListener('DOMContentLoaded', carregarClientes);
</script>
  </body>
</html>
